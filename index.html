<html>

  <style>
    .input-number {
      width: 60px;
    }
  </style>
  
<script type="text/javascript">
  
  function onNativeMessage(json) {
    console.log(json);
    var elem = document.getElementById('received-message');
    elem.textContent = JSON.stringify(json);
  }
  
  function getInputNumber(id) {
    return document.getElementById(id).valueAsNumber;
  }
  
  function sendViewOpenMessage() {
    var left = getInputNumber('view-left');
    var right = getInputNumber('view-right');
    var top = getInputNumber('view-top');
    var bottom = getInputNumber('view-bottom');
    var message = {
       "unityView":{
          "visible":true,
          "rect":{
             "left":left,
             "right":right,
             "top":top,
             "bottom":bottom
          }
       }
    };
    webkit.messageHandlers.native.postMessage(JSON.stringify(message));
  }
  
  function sendPlaceChangedMessage() {
    var placeId = getInputNumber('place-id');
    var pointId = getInputNumber('point-id');
    var itemId = getInputNumber('item-id');
    var left = getInputNumber('view-left');
    var right = getInputNumber('view-right');
    var top = getInputNumber('view-top');
    var bottom = getInputNumber('view-bottom');
    var message = {
       "messageType":"placeChanged",
       "placeChanged":{
         "placeId":placeId,
         "pointId":pointId < 0 ? null : pointId,
         "itemId":itemId < 0 ? null : itemId
       },
       "unityView":{
         "visible":true,
         "rect":{
           "left":left,
           "right":right,
           "top":top,
           "bottom":bottom
         }
       }
    };
    webkit.messageHandlers.native.postMessage(JSON.stringify(message));
  }
  
  function sendCloseViewMessage() {
    var message = {
       "unityView":{
         "visible":false
       }
    };
    webkit.messageHandlers.native.postMessage(JSON.stringify(message));
  }
  
</script>
<body>
  <br/>
  <div>
    left: <input type="number" id="view-left" value="0.4" min="0" max="1" class="input-number" />
    right: <input type="number" id="view-right" value="0.6" min="0" max="1" class="input-number" />
    top: <input type="number" id="view-top" value="0.4" min="0" max="1" class="input-number" />
    bottom: <input type="number" id="view-bottom" value="0.6" min="0" max="1" class="input-number" />
    <input type="button" value="viewOpen message" onclick="sendViewOpenMessage();"/> 
  </div>
  <br/>
  <div>
    place id: <input type="number" id="place-id" value="870177" class="input-number" />
    point id: <input type="number" id="point-id" value="67820" class="input-number" />
    item id: <input type="number" id="item-id" value="-1" class="input-number" />
    <input type="button" value="placeChanged message" onclick="sendPlaceChangedMessage();"/> 
  </div>
  <div>
    <input type="button" value="close view message" onclick="sendCloseViewMessage();"/> 
  </div>
  <br/>
   <div style="background-color:lightgoldenrodyellow;">
    Received:
    <div id="received-message"></div>
    <br/>
  </div>
  <br/>
</body>
</html>
